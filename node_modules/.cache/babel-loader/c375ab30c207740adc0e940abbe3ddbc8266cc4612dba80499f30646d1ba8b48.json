{"ast":null,"code":"import _slicedToArray from\"E:/github/camera/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback,useRef,useEffect}from'react';var useStateWithCallback=function useStateWithCallback(initialState){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var cbRef=useRef(null);var updateState=useCallback(function(newState,cb){cbRef.current=cb;setState(function(prev){return typeof newState==='function'?newState(prev):newState;});},[]);useEffect(function(){if(cbRef.current){cbRef.current(state);cbRef.current=null;}},[state]);return[state,updateState];};export default useStateWithCallback;","map":{"version":3,"names":["useState","useCallback","useRef","useEffect","useStateWithCallback","initialState","_useState","_useState2","_slicedToArray","state","setState","cbRef","updateState","newState","cb","current","prev"],"sources":["E:/github/camera/src/hooks/useStateWithCallback.js"],"sourcesContent":["import {useState, useCallback, useRef, useEffect} from 'react';\r\n\r\nconst useStateWithCallback = initialState => {\r\n  const [state, setState] = useState(initialState);\r\n  const cbRef = useRef(null);\r\n\r\n  const updateState = useCallback((newState, cb) => {\r\n    cbRef.current = cb;\r\n\r\n    setState(prev => typeof newState === 'function' ? newState(prev) : newState);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (cbRef.current) {\r\n      cbRef.current(state);\r\n      cbRef.current = null;\r\n    }\r\n  }, [state]);\r\n\r\n  return [state, updateState];\r\n}\r\n\r\nexport default useStateWithCallback;"],"mappings":"sGAAA,OAAQA,QAAQ,CAAEC,WAAW,CAAEC,MAAM,CAAEC,SAAS,KAAO,OAAO,CAE9D,GAAM,CAAAC,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAGC,YAAY,CAAI,CAC3C,IAAAC,SAAA,CAA0BN,QAAQ,CAACK,YAAY,CAAC,CAAAE,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,GAAM,CAAAI,KAAK,CAAGT,MAAM,CAAC,IAAI,CAAC,CAE1B,GAAM,CAAAU,WAAW,CAAGX,WAAW,CAAC,SAACY,QAAQ,CAAEC,EAAE,CAAK,CAChDH,KAAK,CAACI,OAAO,CAAGD,EAAE,CAElBJ,QAAQ,CAAC,SAAAM,IAAI,QAAI,OAAO,CAAAH,QAAQ,GAAK,UAAU,CAAGA,QAAQ,CAACG,IAAI,CAAC,CAAGH,QAAQ,GAAC,CAC9E,CAAC,CAAE,EAAE,CAAC,CAENV,SAAS,CAAC,UAAM,CACd,GAAIQ,KAAK,CAACI,OAAO,CAAE,CACjBJ,KAAK,CAACI,OAAO,CAACN,KAAK,CAAC,CACpBE,KAAK,CAACI,OAAO,CAAG,IAAI,CACtB,CACF,CAAC,CAAE,CAACN,KAAK,CAAC,CAAC,CAEX,MAAO,CAACA,KAAK,CAAEG,WAAW,CAAC,CAC7B,CAAC,CAED,cAAe,CAAAR,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}