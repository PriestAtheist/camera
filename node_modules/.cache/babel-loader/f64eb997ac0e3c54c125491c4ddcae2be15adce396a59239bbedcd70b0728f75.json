{"ast":null,"code":"import{useParams}from'react-router';import useWebRTC,{LOCAL_VIDEO}from'../../hooks/useWebRTC';import{jsx as _jsx}from\"react/jsx-runtime\";function layout(){var clientsNumber=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var pairs=Array.from({length:clientsNumber}).reduce(function(acc,next,index,arr){if(index%2===0){acc.push(arr.slice(index,index+2));}return acc;},[]);var rowsNumber=pairs.length;var height=\"\".concat(100/rowsNumber,\"%\");return pairs.map(function(row,index,arr){if(index===arr.length-1&&row.length===1){return[{width:'20%',height:height}];}return row.map(function(){return{width:'20%',height:height};});}).flat();}export default function Room(){var _useParams=useParams(),roomID=_useParams.id;var _useWebRTC=useWebRTC(roomID),clients=_useWebRTC.clients,provideMediaRef=_useWebRTC.provideMediaRef;var videoLayout=layout(clients.length);return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',flexWrap:'wrap',height:'100vh'},children:clients.map(function(clientID,index){return/*#__PURE__*/_jsx(\"div\",{style:videoLayout[index],id:clientID,children:/*#__PURE__*/_jsx(\"video\",{width:\"100%\",height:\"100%\",ref:function ref(instance){provideMediaRef(clientID,instance);},autoPlay:true,playsInline:true,muted:clientID===LOCAL_VIDEO})},clientID);})});}","map":{"version":3,"names":["useParams","useWebRTC","LOCAL_VIDEO","jsx","_jsx","layout","clientsNumber","arguments","length","undefined","pairs","Array","from","reduce","acc","next","index","arr","push","slice","rowsNumber","height","concat","map","row","width","flat","Room","_useParams","roomID","id","_useWebRTC","clients","provideMediaRef","videoLayout","style","display","alignItems","justifyContent","flexWrap","children","clientID","ref","instance","autoPlay","playsInline","muted"],"sources":["E:/github/camera/src/pages/Room/index.js"],"sourcesContent":["import {useParams} from 'react-router';\r\nimport useWebRTC, {LOCAL_VIDEO} from '../../hooks/useWebRTC';\r\n\r\nfunction layout(clientsNumber = 1) {\r\n  const pairs = Array.from({length: clientsNumber})\r\n    .reduce((acc, next, index, arr) => {\r\n      if (index % 2 === 0) {\r\n        acc.push(arr.slice(index, index + 2));\r\n      }\r\n\r\n      return acc;\r\n    }, []);\r\n\r\n  const rowsNumber = pairs.length;\r\n  const height = `${100 / rowsNumber}%`;\r\n\r\n  return pairs.map((row, index, arr) => {\r\n\r\n    if (index === arr.length - 1 && row.length === 1) {\r\n      return [{\r\n        width: '20%',\r\n        height,\r\n      }];\r\n    }\r\n\r\n    return row.map(() => ({\r\n      width: '20%',\r\n      height,\r\n    }));\r\n  }).flat();\r\n}\r\n\r\nexport default function Room() {\r\n  const {id: roomID} = useParams();\r\n  const {clients, provideMediaRef} = useWebRTC(roomID);\r\n  const videoLayout = layout(clients.length);\r\n\r\n  return (\r\n    <div style={{\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      flexWrap: 'wrap',\r\n      height: '100vh',\r\n    }}>\r\n      {clients.map((clientID, index) => {\r\n        return (\r\n          <div key={clientID} style={videoLayout[index]} id={clientID}>\r\n            <video\r\n              width='100%'\r\n              height='100%'\r\n              ref={instance => {\r\n                provideMediaRef(clientID, instance);\r\n              }}\r\n              autoPlay\r\n              playsInline\r\n              muted={clientID === LOCAL_VIDEO}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,OAAQA,SAAS,KAAO,cAAc,CACtC,MAAO,CAAAC,SAAS,EAAGC,WAAW,KAAO,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE7D,QAAS,CAAAC,MAAMA,CAAA,CAAoB,IAAnB,CAAAC,aAAa,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAC/B,GAAM,CAAAG,KAAK,CAAGC,KAAK,CAACC,IAAI,CAAC,CAACJ,MAAM,CAAEF,aAAa,CAAC,CAAC,CAC9CO,MAAM,CAAC,SAACC,GAAG,CAAEC,IAAI,CAAEC,KAAK,CAAEC,GAAG,CAAK,CACjC,GAAID,KAAK,CAAG,CAAC,GAAK,CAAC,CAAE,CACnBF,GAAG,CAACI,IAAI,CAACD,GAAG,CAACE,KAAK,CAACH,KAAK,CAAEA,KAAK,CAAG,CAAC,CAAC,CAAC,CACvC,CAEA,MAAO,CAAAF,GAAG,CACZ,CAAC,CAAE,EAAE,CAAC,CAER,GAAM,CAAAM,UAAU,CAAGV,KAAK,CAACF,MAAM,CAC/B,GAAM,CAAAa,MAAM,IAAAC,MAAA,CAAM,GAAG,CAAGF,UAAU,KAAG,CAErC,MAAO,CAAAV,KAAK,CAACa,GAAG,CAAC,SAACC,GAAG,CAAER,KAAK,CAAEC,GAAG,CAAK,CAEpC,GAAID,KAAK,GAAKC,GAAG,CAACT,MAAM,CAAG,CAAC,EAAIgB,GAAG,CAAChB,MAAM,GAAK,CAAC,CAAE,CAChD,MAAO,CAAC,CACNiB,KAAK,CAAE,KAAK,CACZJ,MAAM,CAANA,MACF,CAAC,CAAC,CACJ,CAEA,MAAO,CAAAG,GAAG,CAACD,GAAG,CAAC,iBAAO,CACpBE,KAAK,CAAE,KAAK,CACZJ,MAAM,CAANA,MACF,CAAC,EAAC,CAAC,CACL,CAAC,CAAC,CAACK,IAAI,CAAC,CAAC,CACX,CAEA,cAAe,SAAS,CAAAC,IAAIA,CAAA,CAAG,CAC7B,IAAAC,UAAA,CAAqB5B,SAAS,CAAC,CAAC,CAArB6B,MAAM,CAAAD,UAAA,CAAVE,EAAE,CACT,IAAAC,UAAA,CAAmC9B,SAAS,CAAC4B,MAAM,CAAC,CAA7CG,OAAO,CAAAD,UAAA,CAAPC,OAAO,CAAEC,eAAe,CAAAF,UAAA,CAAfE,eAAe,CAC/B,GAAM,CAAAC,WAAW,CAAG7B,MAAM,CAAC2B,OAAO,CAACxB,MAAM,CAAC,CAE1C,mBACEJ,IAAA,QAAK+B,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAAQ,CACxBC,QAAQ,CAAE,MAAM,CAChBlB,MAAM,CAAE,OACV,CAAE,CAAAmB,QAAA,CACCR,OAAO,CAACT,GAAG,CAAC,SAACkB,QAAQ,CAAEzB,KAAK,CAAK,CAChC,mBACEZ,IAAA,QAAoB+B,KAAK,CAAED,WAAW,CAAClB,KAAK,CAAE,CAACc,EAAE,CAAEW,QAAS,CAAAD,QAAA,cAC1DpC,IAAA,UACEqB,KAAK,CAAC,MAAM,CACZJ,MAAM,CAAC,MAAM,CACbqB,GAAG,CAAE,SAAAA,IAAAC,QAAQ,CAAI,CACfV,eAAe,CAACQ,QAAQ,CAAEE,QAAQ,CAAC,CACrC,CAAE,CACFC,QAAQ,MACRC,WAAW,MACXC,KAAK,CAAEL,QAAQ,GAAKvC,WAAY,CACjC,CAAC,EAVMuC,QAWL,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}